<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>{% if is_new %}–ù–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π{% else %}–°—Ü–µ–Ω–∞—Ä–∏–π: {{ s.scenario }}{% endif %}</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; margin: 2rem; }
    h1 { margin-bottom: 1rem; }
    form { max-width: 1000px; }
    label { font-weight: 600; display:block; margin-top: 1rem; }
    input[type="text"], textarea { width: 100%; box-sizing: border-box; padding: 8px; }
    .row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
    .actions { margin-top: 1.5rem; display:flex; gap: .75rem; }
    a.btn, button { display:inline-block; padding:.55rem .9rem; border-radius:.5rem; border:1px solid #ddd; background:#fff; cursor:pointer; text-decoration:none; }
    a.btn:hover, button:hover { background:#f6f6f6; }
    .muted { color:#666; font-size:.9rem; }
    code.inline { background:#f7f7f7; padding:.1rem .35rem; border-radius:.35rem; border:1px solid #eee; }
  </style>
</head>
<body>
  <h1>
    {% if is_new %}–ù–æ–≤—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π{% else %}–°—Ü–µ–Ω–∞—Ä–∏–π: <code class="inline">{{ s.scenario }}</code>{% endif %}
  </h1>

  <form method="post" action="{% if is_new %}/scenarios/new{% else %}/scenarios/{{ s.scenario }}{% endif %}">
    {% if is_new %}
      <label>–ö–ª—é—á —Å—Ü–µ–Ω–∞—Ä–∏—è (a-z, 0-9, _; 2‚Äì40 —Å–∏–º–≤–æ–ª–æ–≤)</label>
      <input type="text" name="scenario_key" placeholder="mission / strengths / weaknesses / countries / business / love" required>
    {% else %}
      <label>–ö–ª—é—á —Å—Ü–µ–Ω–∞—Ä–∏—è</label>
      <input type="text" value="{{ s.scenario }}" disabled>
    {% endif %}

    <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
    <input type="text" name="title" value="{{ s.title or '' }}" placeholder="–ß–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" required>

    <label>Prompt template</label>
    <textarea name="prompt_template" rows="10" placeholder="–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –¥–ª—è LLM (—á—Ç–æ –≤–µ—Ä–Ω—É—Ç—å –∏ –≤ –∫–∞–∫–æ–º —Ñ–æ—Ä–º–∞—Ç–µ)">{{ s.prompt_template or '' }}</textarea>

    <label>JSON-—Å—Ö–µ–º–∞ –æ—Ç–≤–µ—Ç–∞ (schema_json)</label>
    <textarea name="schema_json" rows="14" placeholder='–ù–∞–ø—Ä–∏–º–µ—Ä: {"type":"object","required":["mission"],"properties":{"mission":{"type":"string"}}}'>{{ schema_json_str }}</textarea>
    <p class="muted">–ü–æ–¥—Å–∫–∞–∑–∫–∞: —Å—Ö–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –æ—Ç–≤–µ—Ç–∞ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (repair) –ø—Ä–∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏.</p>

    <div class="row">
      <div>
        <label>–í–∫–ª—é—á–µ–Ω</label>
        <input type="checkbox" name="enabled" {% if s.enabled %}checked{% endif %}>
      </div>
      <div>
        <label>–û–±–Ω–æ–≤–ª–µ–Ω–æ</label>
        <input type="text" value="{{ s.updated_at or '‚Äî' }}" disabled>
      </div>
    </div>

    <div class="actions">
      <button type="submit">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      <a class="btn" href="/scenarios">‚Ü©Ô∏è –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>
      <a class="btn" href="/settings">‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</a>
    </div>
  </form>
</body>
</html>
